[17:29:44] CharacterManager: Initializing CharacterManager.
[17:29:44] LLMFactory: Initializing LLMFactory.
[17:29:44] LLMFactory: LLMFactory initialized.
[17:29:44] LLMInstanceManager: Initializing LLMInstanceManager.
[17:29:44] LLMFactory: Initializing LLMFactory.
[17:29:44] LLMFactory: LLMFactory initialized.
[17:29:44] LLMInstanceManager: LLMInstanceManager initialized.
[17:29:44] PersonaManager: Initializing PersonaManager.
[17:29:44] PersonaManager: Personas loaded successfully.
[17:29:44] PersonaManager: PersonaManager initialized.
[17:29:44] CharacterManager: CharacterManager initialized.
[17:29:44] System: WebSocket connection established.
[17:29:44] System: WebSocket connection accepted.
[17:29:44] CharacterManager: Listing all characters.
[17:29:44] System: Character configuration sent to client.
[17:29:44] WebSocketManager: WebSocket endpoint activated.
[17:29:44] WebSocketManager: WebSocket accepted.
[17:29:44] System: Conversation loop started.
[17:29:44] InitialStatusSetter: Setting initial statuses for characters.
[17:29:44] CharacterManager: Getting character names.
[17:29:44] CharacterManager: Character names retrieved.
[17:29:44] StatusManager: Updating status for all characters to ACTIVE.
[17:29:44] StatusManager: Updating status for ルミナ to ACTIVE.
[17:29:44] StatusManager: Status updated for ルミナ to ACTIVE.
[17:29:44] StatusManager: Updating status for クラリス to ACTIVE.
[17:29:44] StatusManager: Status updated for クラリス to ACTIVE.
[17:29:44] StatusManager: Updating status for ノクス to ACTIVE.
[17:29:44] StatusManager: Status updated for ノクス to ACTIVE.
[17:29:44] StatusManager: Status updated for all characters to ACTIVE.
[17:29:44] InitialStatusSetter: Initial statuses set for all characters.
[17:29:44] System: Waiting for user input...
[17:29:50] USER: こんにちは
[17:29:50] CharacterManager: Getting character names.
[17:29:50] CharacterManager: Character names retrieved.
[17:29:50] StatusManager: Updating status for all characters to IDLE.
[17:29:50] StatusManager: Updating status for ルミナ to IDLE.
[17:29:50] StatusManager: Status updated for ルミナ to IDLE.
[17:29:50] StatusManager: Updating status for クラリス to IDLE.
[17:29:50] StatusManager: Status updated for クラリス to IDLE.
[17:29:50] StatusManager: Updating status for ノクス to IDLE.
[17:29:50] StatusManager: Status updated for ノクス to IDLE.
[17:29:50] StatusManager: Status updated for all characters to IDLE.
[17:29:50] CharacterManager: Getting character names.
[17:29:50] CharacterManager: Character names retrieved.
[17:29:50] CharacterManager: Getting LLM for ルミナ.
[17:29:50] LLMInstanceManager: Getting LLM instance for ルミナ.
[17:29:50] LLMInstanceManager: Creating new LLM instance for ルミナ.
[17:29:50] LLMFactory: Creating LLM with provider: ollama, model: 7shi/llm-jp-3-ezo-humanities:3.7b-instruct-q8_0
[17:29:50] LLMFactory: Creating Ollama LLM with model: 7shi/llm-jp-3-ezo-humanities:3.7b-instruct-q8_0, base_url: http://192.168.1.33:11434
[17:29:50] LLMFactory: Ollama LLM created with model: 7shi/llm-jp-3-ezo-humanities:3.7b-instruct-q8_0
[17:29:50] LLMInstanceManager: LLM instance created and stored for ルミナ.
[17:29:50] LLMInstanceManager: LLM instance retrieved for ルミナ.
[17:29:50] CharacterManager: LLM retrieved for ルミナ.
[17:29:50] System: Processing response for ルミナ
[17:29:50] StatusManager: Updating status for ルミナ to THINKING.
[17:29:50] StatusManager: Status updated for ルミナ to THINKING.
[17:29:50] CharacterManager: Getting persona prompt for ルミナ.
[17:29:50] PersonaManager: Getting persona prompt for ルミナ.
[17:29:50] PersonaManager: No persona prompt found for ルミナ.
[17:29:50] CharacterManager: Persona prompt retrieved for ルミナ.
[17:29:50] CharacterManager: Getting character names.
[17:29:50] CharacterManager: Character names retrieved.
[17:29:50] System: Invoking LLM for ルミナ
[17:29:53] System: Error invoking LLM for ルミナ: 'str' object has no attribute 'content'\nTraceback (most recent call last):
  File "E:\GenerativeAI\LlmMultiChat\LLM\conversation_loop.py", line 56, in conversation_loop
    response_text = response.content
AttributeError: 'str' object has no attribute 'content'

[17:29:53] System: Response sent for ルミナ
[17:29:53] StatusManager: Updating status for ルミナ to IDLE.
[17:29:53] StatusManager: Status updated for ルミナ to IDLE.
[17:29:54] CharacterManager: Getting LLM for クラリス.
[17:29:54] LLMInstanceManager: Getting LLM instance for クラリス.
[17:29:54] LLMInstanceManager: Creating new LLM instance for クラリス.
[17:29:54] LLMFactory: Creating LLM with provider: ollama, model: amoral-gemma3:latest
[17:29:54] LLMFactory: Creating Ollama LLM with model: amoral-gemma3:latest, base_url: http://192.168.1.33:11434
[17:29:54] LLMFactory: Ollama LLM created with model: amoral-gemma3:latest
[17:29:54] LLMInstanceManager: LLM instance created and stored for クラリス.
[17:29:54] LLMInstanceManager: LLM instance retrieved for クラリス.
[17:29:54] CharacterManager: LLM retrieved for クラリス.
[17:29:54] System: Processing response for クラリス
[17:29:54] StatusManager: Updating status for クラリス to THINKING.
[17:29:54] StatusManager: Status updated for クラリス to THINKING.
[17:29:54] CharacterManager: Getting persona prompt for クラリス.
[17:29:54] PersonaManager: Getting persona prompt for クラリス.
[17:29:54] PersonaManager: No persona prompt found for クラリス.
[17:29:54] CharacterManager: Persona prompt retrieved for クラリス.
[17:29:54] CharacterManager: Getting character names.
[17:29:54] CharacterManager: Character names retrieved.
[17:29:54] System: Invoking LLM for クラリス
[17:29:58] System: Error invoking LLM for クラリス: 'str' object has no attribute 'content'\nTraceback (most recent call last):
  File "E:\GenerativeAI\LlmMultiChat\LLM\conversation_loop.py", line 56, in conversation_loop
    response_text = response.content
AttributeError: 'str' object has no attribute 'content'

[17:29:58] System: Response sent for クラリス
[17:29:58] StatusManager: Updating status for クラリス to IDLE.
[17:29:58] StatusManager: Status updated for クラリス to IDLE.
[17:29:59] CharacterManager: Getting LLM for ノクス.
[17:29:59] LLMInstanceManager: Getting LLM instance for ノクス.
[17:29:59] LLMInstanceManager: Creating new LLM instance for ノクス.
[17:29:59] LLMFactory: Creating LLM with provider: ollama, model: deepseek-r1:1.5b
[17:29:59] LLMFactory: Creating Ollama LLM with model: deepseek-r1:1.5b, base_url: http://192.168.1.33:11434
[17:29:59] LLMFactory: Ollama LLM created with model: deepseek-r1:1.5b
[17:29:59] LLMInstanceManager: LLM instance created and stored for ノクス.
[17:29:59] LLMInstanceManager: LLM instance retrieved for ノクス.
[17:29:59] CharacterManager: LLM retrieved for ノクス.
[17:29:59] System: Processing response for ノクス
[17:29:59] StatusManager: Updating status for ノクス to THINKING.
[17:29:59] StatusManager: Status updated for ノクス to THINKING.
[17:29:59] CharacterManager: Getting persona prompt for ノクス.
[17:29:59] PersonaManager: Getting persona prompt for ノクス.
[17:29:59] PersonaManager: No persona prompt found for ノクス.
[17:29:59] CharacterManager: Persona prompt retrieved for ノクス.
[17:29:59] CharacterManager: Getting character names.
[17:29:59] CharacterManager: Character names retrieved.
[17:29:59] System: Invoking LLM for ノクス
[17:30:07] System: Error invoking LLM for ノクス: 'str' object has no attribute 'content'\nTraceback (most recent call last):
  File "E:\GenerativeAI\LlmMultiChat\LLM\conversation_loop.py", line 56, in conversation_loop
    response_text = response.content
AttributeError: 'str' object has no attribute 'content'

[17:30:07] System: Response sent for ノクス
[17:30:07] StatusManager: Updating status for ノクス to IDLE.
[17:30:07] StatusManager: Status updated for ノクス to IDLE.
[17:30:08] CharacterManager: Getting character names.
[17:30:08] CharacterManager: Character names retrieved.
[17:30:08] StatusManager: Updating status for all characters to ACTIVE.
[17:30:08] StatusManager: Updating status for ルミナ to ACTIVE.
[17:30:08] StatusManager: Status updated for ルミナ to ACTIVE.
[17:30:08] StatusManager: Updating status for クラリス to ACTIVE.
[17:30:08] StatusManager: Status updated for クラリス to ACTIVE.
[17:30:08] StatusManager: Updating status for ノクス to ACTIVE.
[17:30:08] StatusManager: Status updated for ノクス to ACTIVE.
[17:30:08] StatusManager: Status updated for all characters to ACTIVE.
[17:30:08] System: Waiting for user input...
[17:33:19] System: Error in conversation loop: (1012, None)\nTraceback (most recent call last):
  File "E:\GenerativeAI\LlmMultiChat\LLM\conversation_loop.py", line 26, in conversation_loop
    user_query = await websocket.receive_text()
  File "C:\Users\nyuki\miniconda3\envs\ChatEnv\lib\site-packages\starlette\websockets.py", line 120, in receive_text
    self._raise_on_disconnect(message)
  File "C:\Users\nyuki\miniconda3\envs\ChatEnv\lib\site-packages\starlette\websockets.py", line 114, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (1012, None)

[17:33:19] System: Conversation loop ended.
[17:33:19] WebSocketManager: WebSocket endpoint finished.
[17:33:19] System: WebSocket connection closed.
